<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WokRock — 交互式套餐/单点下单页</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { background: #f8fafc; }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React 18 + Babel (运行 JSX) -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- jsPDF + html2canvas （PDF 导出用） -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- App -->
  <script type="text/babel">
    const { useMemo, useRef, useState } = React;

    // CHF 格式化
    const chf = (n) => new Intl.NumberFormat(undefined, { style: 'currency', currency: 'CHF', maximumFractionDigits: 0 }).format(n);

    // 多语言
    const i18n = {
      de: { langLabel: 'Deutsch', nav: { home: 'Home', menu: 'Einzeln bestellen', packages: 'Pakete', about: 'Über uns', contact: 'Kontakt' }, heroTitle: 'WokRock – Frisch. Hochwertig. Köstlich.', heroSubtitle: 'Premium-Party-Catering in der ganzen Schweiz (10–200 Personen)', ctaPackages: 'Pakete zusammenstellen', ctaMenu: 'Einzeln bestellen', trust: { a: 'Sauber & zuverlässig', b: 'Frische Zutaten', c: 'Schnelle Lieferung', d: 'Für Events von 10–200 Personen', }, sectionTitles: { builder: 'Schnellrechner & Paket-Konfigurator', menu: 'Einzelgerichte bestellen (À la carte)', gallery: 'Beliebte Gerichte', about: 'Warum WokRock?', checkout: 'Bestelldaten & Lieferung', }, peopleInput: 'Teilnehmerzahl', chooseRange: 'Wähle die Personenspanne:', pkg: { standard: 'Standard', deluxe: 'Deluxe', deluxePlus: 'Deluxe Plus', selectPkg: 'Paket wählen', includes: 'Enthält', starter: 'Vorspeise', starters: 'Vorspeisen', hot: 'Warme Gerichte', dessert: 'Dessert', desserts: 'Desserts', chooseItems: 'Gerichte auswählen', }, pricePerPerson: 'Preis/Person', total: 'Zwischensumme', addToOrder: 'Zur Bestellung hinzufügen', yourSelection: 'Ihre Auswahl', clear: 'Zurücksetzen', menuAdd: 'Hinzufügen', menuQty: 'Menge', downloadPDF: 'Bestellübersicht als PDF', emailOrder: 'Per E‑Mail an WokRock senden', orCall: 'Oder rufen Sie uns an:', phone: '+41 79 352 3555', delivery: { date: 'Lieferdatum', time: 'Lieferzeit', address: 'Lieferadresse', notes: 'Bemerkungen (Allergien, Zugang etc.)', }, orderType: { package: 'Paketbestellung', ala: 'Einzelbestellung' }, langSwitch: 'Sprache', goCheckout: 'Zur Kasse', menuView: { selected: 'Ausgewählt', empty: 'Noch nichts ausgewählt' }, },
      en: { langLabel: 'English', nav: { home: 'Home', menu: 'À la carte', packages: 'Packages', about: 'About', contact: 'Contact' }, heroTitle: 'WokRock – Fresh. Premium. Delicious.', heroSubtitle: 'Party catering across Switzerland (10–200 guests)', ctaPackages: 'Build a package', ctaMenu: 'Order à la carte', trust: { a: 'Clean & reliable', b: 'Fresh ingredients', c: 'Fast delivery', d: 'Events for 10–200' }, sectionTitles: { builder: 'Quick Estimator & Package Builder', menu: 'Order À la carte', gallery: 'Popular Dishes', about: 'Why WokRock?', checkout: 'Order & Delivery Details' }, peopleInput: 'Guest count', chooseRange: 'Choose a guest range:', pkg: { standard: 'Standard', deluxe: 'Deluxe', deluxePlus: 'Deluxe Plus', selectPkg: 'Choose package', includes: 'Includes', starter: 'Starter', starters: 'Starters', hot: 'Hot dishes', dessert: 'Dessert', desserts: 'Desserts', chooseItems: 'Pick dishes' }, pricePerPerson: 'Price/person', total: 'Subtotal', addToOrder: 'Add to order', yourSelection: 'Your selection', clear: 'Clear', menuAdd: 'Add', menuQty: 'Qty', downloadPDF: 'Download order as PDF', emailOrder: 'Send order by email', orCall: 'Or call us:', phone: '+41 79 352 3555', delivery: { date: 'Delivery date', time: 'Delivery time', address: 'Delivery address', notes: 'Notes (allergies, access, etc.)' }, orderType: { package: 'Package', ala: 'À la carte' }, langSwitch: 'Language', goCheckout: 'Checkout', menuView: { selected: 'Selected', empty: 'Nothing selected yet' }, },
      zh: { langLabel: '中文', nav: { home: '首页', menu: '单独订购', packages: '聚会套餐', about: '关于我们', contact: '联系' }, heroTitle: 'WokRock — 干净·高品质·美味', heroSubtitle: '覆盖全瑞士的聚会餐服务（10–200人）', ctaPackages: '开始配置套餐', ctaMenu: '单独点菜', trust: { a: '干净可靠', b: '新鲜食材', c: '快速配送', d: '10–200人活动' }, sectionTitles: { builder: '快速估算与套餐配置', menu: '单独订购（À la carte）', gallery: '人气菜品', about: '为什么选择 WokRock?', checkout: '订单与配送信息' }, peopleInput: '聚会人数', chooseRange: '选择人数范围：', pkg: { standard: '普通套餐', deluxe: '豪华套餐', deluxePlus: '豪华套餐Plus', selectPkg: '选择套餐', includes: '包含', starter: '前餐', starters: '前餐', hot: '热菜', dessert: '甜点', desserts: '甜点', chooseItems: '选择菜品' }, pricePerPerson: '每人价格', total: '小计', addToOrder: '加入订单', yourSelection: '已选清单', clear: '清空', menuAdd: '添加', menuQty: '数量', downloadPDF: '下载PDF清单', emailOrder: '发送到邮箱', orCall: '或直接电话：', phone: '+41 79 352 3555', delivery: { date: '配送日期', time: '配送时间', address: '配送地址', notes: '备注（过敏、门禁等）' }, orderType: { package: '套餐订购', ala: '单独订购' }, langSwitch: '语言', goCheckout: '去结算', menuView: { selected: '已选', empty: '暂未选择' }, },
    };

    // 示例菜品
    const DISHES = {
  starters: [
    { id: 'st1', name: { de: 'Noodle Salat', en: 'Noodle Salad', zh: '凉皮' }, img: '/WokRock/image/liangpi.jpg', price: 10, spicy: 0 },
    { id: 'st2', name: { de: 'Gurken Salat', en: 'Cucumber Salad', zh: '凉拌黄瓜' }, img: '/WokRock/image/huanggua.jpg', price: 8, spicy: 0 },
    { id: 'st3', name: { de: 'Spring Roll', en: 'Spring Roll', zh: '春卷' }, img: '/WokRock/image/SpringRoll800.jpg', price: 9, spicy: 1 },
  ],
  hot: [
    { id: 'h1', name: { de: 'Beef Teriyaki', en: 'Beef Teriyaki', zh: '照烧牛肉' }, img: '/WokRock/image/CurryBeef.jpg', price: 18, spicy: 0 },
    { id: 'h2', name: { de: 'Kung Pao Chicken', en: 'Kung Pao Chicken', zh: '宫保鸡丁' }, img: '/WokRock/image/gongbaojiding.jpg', price: 16, spicy: 2 },
    { id: 'h3', name: { de: 'MaPo Tofu', en: 'MaPo Tofu', zh: '麻婆豆腐' }, img: '/WokRock/image/mapodoufu.jpg', price: 14, spicy: 3 },
    { id: 'h4', name: { de: 'Curry Chicken', en: 'Curry Chicken', zh: '咖喱鸡' }, img: '/WokRock/image/CurryChicken800.jpg', price: 15, spicy: 1 },
    { id: 'h5', name: { de: 'Jiaozi', en: 'Jiaozi', zh: '饺子' }, img: '/WokRock/image/JIAOZI800.jpg', price: 12, spicy: 1 },
  ],
  desserts: [
    { id: 'd1', name: { de: 'Mango Sticky Rice', en: 'Mango Sticky Rice', zh: '芒果糯米饭' }, img: '/WokRock/image/mangorice.jpg', price: 12, spicy: 0 },
    { id: 'd2', name: { de: 'Matcha Mochi', en: 'Matcha Mochi', zh: '抹茶麻薯' }, img: '/WokRock/image/mochi.jpg', price: 10, spicy: 0 },
    { id: 'd3', name: { de: 'Sesame Balls', en: 'Sesame Balls', zh: '芝麻球' }, img: '/WokRock/image/maqiu.jpg', price: 9, spicy: 0 },
  ],
};
// 价格和辣度显示


    // 价格与套餐规则
    const RULES = [
      { range: '10–20', min: 10, max: 20, prices: { standard: 25, deluxe: 35, deluxePlus: 50 }, picks: { standard: { starters: 1, hot: 2, desserts: 1 }, deluxe: { starters: 1, hot: 3, desserts: 1 }, deluxePlus: { starters: 2, hot: 3, desserts: 2 } } },
      { range: '21–50', min: 21, max: 50, prices: { standard: 25, deluxe: 32, deluxePlus: 45 }, picks: { standard: { starters: 2, hot: 2, desserts: 2 }, deluxe: { starters: 2, hot: 4, desserts: 3 }, deluxePlus: { starters: 3, hot: 5, desserts: 3 } } },
      { range: '50+', min: 51, max: 10000, prices: { standard: 23, deluxe: 30, deluxePlus: 40 }, picks: { standard: { starters: 2, hot: 2, desserts: 2 }, deluxe: { starters: 2, hot: 4, desserts: 3 }, deluxePlus: { starters: 3, hot: 5, desserts: 3 } } },
    ];

    const LANGS = ['de', 'en', 'zh'];

    const SectionTitle = ({ children }) => (
      <h2 className="text-2xl md:text-3xl font-semibold tracking-tight mb-4">{children}</h2>
    );

    const Pill = ({ children }) => (
      <span className="inline-flex items-center px-3 py-1 rounded-full text-xs md:text-sm border border-white/40 bg-white/10 backdrop-blur-sm">{children}</span>
    );

    function DishCard({ dish, lang, onAdd }) {
      return (
        <div className="group rounded-2xl p-3 border shadow-sm hover:shadow-lg transition bg-white/60 backdrop-blur">
          <div className="aspect-[4/3] w-full overflow-hidden rounded-xl mb-3 bg-gray-100">
            <img src={dish.img} alt={dish.name[lang]} className="w-full h-full object-cover group-hover:scale-[1.02] transition" />
          </div>
          <div className="flex items-center justify-between gap-2">
            <div className="font-medium text-gray-800">{dish.name[lang]}</div>
            {onAdd && (
              <button onClick={onAdd} className="px-3 py-1.5 rounded-xl text-sm bg-black text-white hover:bg-gray-800">+</button>
            )}
          </div>
        </div>
      );
    }

    function WokRockSite() {
      const [lang, setLang] = useState('de');
      const t = i18n[lang];
      const [guestCount, setGuestCount] = useState(20);
      const [pkgKey, setPkgKey] = useState(null); // 'standard' | 'deluxe' | 'deluxePlus'
      const [pkgSelections, setPkgSelections] = useState({ starters: [], hot: [], desserts: [] });
      const [cart, setCart] = useState([]); // {id, name, qty, price}
      const [orderType] = useState('package'); // 默认走套餐，也可以扩展切换
      const [deliveryDate, setDeliveryDate] = useState('');
      const [deliveryTime, setDeliveryTime] = useState('');
      const [address, setAddress] = useState('');
      const [notes, setNotes] = useState('');

      const [showToast, setShowToast] = useState(false);
      const receiptRef = useRef(null); const dateInputRef = useRef(null);

      const rule = useMemo(() => RULES.find(r => guestCount >= r.min && guestCount <= r.max) || RULES[0], [guestCount]);
      const picksRequired = useMemo(() => (pkgKey ? rule.picks[pkgKey] : { starters: 0, hot: 0, desserts: 0 }), [rule, pkgKey]);
      const pricePerPerson = useMemo(() => (pkgKey ? rule.prices[pkgKey] : 0), [rule, pkgKey]);
      const packageSubtotal = useMemo(() => (pkgKey ? pricePerPerson * guestCount : 0), [pricePerPerson, guestCount, pkgKey]);
      const alaSubtotal = useMemo(() => cart.reduce((s, it) => s + it.price * it.qty, 0), [cart]);
      const total = (orderType === 'package' ? packageSubtotal : alaSubtotal);

      const togglePkgItem = (cat, id) => {
        setPkgSelections(prev => {
          const exists = prev[cat].includes(id);
          const arr = exists ? prev[cat].filter(x => x !== id) : [...prev[cat], id];
          return { ...prev, [cat]: arr };
        });
      };

      const isPkgValid = () => ['starters', 'hot', 'desserts'].every(cat => (pkgSelections[cat]?.length || 0) === (picksRequired[cat] || 0));

      const addPackageToOrder = () => {
        if (!pkgKey || !isPkgValid()) return;
        const line = {
          id: `pkg-${Date.now()}`,
          name: `${t.orderType.package}: ${t.pkg[pkgKey] || pkgKey} (${guestCount}p @ ${chf(pricePerPerson)})`,
          qty: 1,
          price: pricePerPerson * guestCount,
          meta: { pkgKey, guestCount, selection: pkgSelections },
        };
        setCart(c => [...c, line]);
      };

      const addDish = (dish, price = 12) => {
        setCart(c => {
          const idx = c.findIndex(x => x.id === dish.id);
          if (idx >= 0) {
            const copy = [...c];
            copy[idx] = { ...copy[idx], qty: copy[idx].qty + 1 };
            return copy;
          }
          return [...c, { id: dish.id, name: dish.name[lang], qty: 1, price }];
        });
      };

      const updateQty = (id, qty) => {
        setCart(c => c.map(x => (x.id === id ? { ...x, qty: Math.max(0, qty) } : x)).filter(x => x.qty > 0));
      };

      const clearAll = () => {
        setCart([]);
        setPkgKey(null);
        setPkgSelections({ starters: [], hot: [], desserts: [] });
      };

      const selectionSummaryLines = () => {
        if (orderType === 'package' && pkgKey) {
          const labels = (ids) => ids.map((id) => {
            const item = [...DISHES.starters, ...DISHES.hot, ...DISHES.desserts].find((d) => d.id === id);
            return item ? item.name[lang] : id;
          }).join(', ');
          return [
            `${t.orderType.package} — ${t.pkg[pkgKey]} — ${guestCount}p — ${chf(pricePerPerson)} /p`,
            `${t.pkg.starters}: ${labels(pkgSelections.starters)}`,
            `${t.pkg.hot}: ${labels(pkgSelections.hot)}`,
            `${t.pkg.desserts}: ${labels(pkgSelections.desserts)}`,
          ];
        }
        return cart.map((it) => `${it.name} × ${it.qty} — ${chf(it.price * it.qty)}`);
      };

      const showConfirmation = () => {
        setShowToast(true);
        window.setTimeout(() => setShowToast(false), 3200);
      };

      const goToCheckout = () => {
        const el = document.getElementById('checkout');
        if (el) el.scrollIntoView({ behavior: 'smooth' });
        setTimeout(() => dateInputRef.current?.focus(), 600);
      };

      const handleDownloadPDF = async () => {
        try {
          const { jsPDF } = window.jspdf;
          const node = receiptRef.current;
          const canvas = await html2canvas(node, { scale: 2, backgroundColor: '#ffffff' });
          const imgData = canvas.toDataURL('image/png');
          const pdf = new jsPDF({ unit: 'pt', format: 'a4' });
          const pageWidth = pdf.internal.pageSize.getWidth();
          const pageHeight = pdf.internal.pageSize.getHeight();
          const imgWidth = pageWidth - 80;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          pdf.addImage(imgData, 'PNG', 40, 40, imgWidth, Math.min(imgHeight, pageHeight - 80));
          pdf.save(`WokRock_Bestellung_${new Date().toISOString().slice(0,10)}.pdf`);
          showConfirmation();
        } catch (e) {
          alert('PDF 导出需要 jsPDF 与 html2canvas（已在本页通过 CDN 引入）。');
        }
      };

      const emailBody = encodeURIComponent([
        'WokRock Bestellung',
        '',
        `Typ: ${orderType === 'package' ? t.orderType.package : t.orderType.ala}`,
        ...selectionSummaryLines(),
        '',
        `${t.delivery.date}: ${deliveryDate}`,
        `${t.delivery.time}: ${deliveryTime}`,
        `${t.delivery.address}: ${address}`,
        `${t.delivery.notes}: ${notes}`,
        '',
        `Gesamtsumme / Total: ${chf(total)}`,
      ].join('\n'));

      const emailTo = 'bestellung@wokrock.com'; // 如需改为你的邮箱，改这里即可
      const emailLink = `mailto:${emailTo}?subject=${encodeURIComponent('WokRock Bestellung')}&body=${emailBody}`;

      return (
        <div className="min-h-screen bg-gradient-to-b from-emerald-50 via-white to-emerald-50 text-gray-900">
          {/* 顶部导航 */}
          <header className="sticky top-0 z-40 backdrop-blur bg-white/70 border-b">
            <div className="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <div className="w-9 h-9 rounded-2xl bg-emerald-500" />
                <div className="font-bold text-lg tracking-tight">WokRock</div>
              </div>
              <nav className="hidden md:flex items-center gap-6 text-sm">
                <a href="#builder" className="hover:opacity-70">{t.nav.packages}</a>
                <a href="#menu" className="hover:opacity-70">{t.nav.menu}</a>
                <a href="#about" className="hover:opacity-70">{t.nav.about}</a>
                <a href="#checkout" className="hover:opacity-70">{t.nav.contact}</a>
              </nav>
              <div className="flex items-center gap-2">
                <label className="sr-only">{t.langSwitch}</label>
                <select value={lang} onChange={(e) => setLang(e.target.value)} className="rounded-xl border px-2 py-1 bg-white text-sm">
                  {LANGS.map((l) => (
                    <option key={l} value={l}>{i18n[l].langLabel}</option>
                  ))}
                </select>
              </div>
            </div>
          </header>

          {/* 头图 */}
          <section className="relative overflow-hidden">
            <div className="absolute inset-0 -z-10 bg-[radial-gradient(circle_at_20%_20%,rgba(16,185,129,.25),transparent_40%),radial-gradient(circle_at_80%_0%,rgba(59,130,246,.2),transparent_35%),radial-gradient(circle_at_80%_80%,rgba(236,72,153,.2),transparent_35%)]"/>
            <div className="max-w-6xl mx-auto px-4 py-16 md:py-24 grid md:grid-cols-2 gap-8 items-center">
              <div>
                <h1 className="text-4xl md:text-5xl font-bold leading-tight tracking-tight">{t.heroTitle}</h1>
                <p className="mt-4 text-lg text-gray-700">{t.heroSubtitle}</p>
                <div className="mt-6 flex flex-wrap gap-3">
                  <Pill>{t.trust.a}</Pill>
                  <Pill>{t.trust.b}</Pill>
                  <Pill>{t.trust.c}</Pill>
                  <Pill>{t.trust.d}</Pill>
                </div>
                <div className="mt-8 flex flex-wrap gap-3">
                  <a href="#builder" className="px-5 py-3 rounded-2xl bg-black text-white hover:bg-gray-800">{t.ctaPackages}</a>
                  <a href="#menu" className="px-5 py-3 rounded-2xl bg-white border hover:bg-gray-50">{t.ctaMenu}</a>
                </div>
              </div>
              <div className="grid grid-cols-2 gap-3">
  <div className="aspect-[4/3] rounded-3xl bg-white/70 shadow overflow-hidden">
    <img src="image/Hero1.jpg" alt="dish" className="w-full h-full object-cover"/>
  </div>
  <div className="aspect-[4/3] rounded-3xl bg-white/70 shadow overflow-hidden">
    <img src="image/Hero2.jpg" alt="dish" className="w-full h-full object-cover"/>
  </div>
  <div className="aspect-[4/3] rounded-3xl bg-white/70 shadow overflow-hidden">
    <img src="image/hero3.jpg" alt="dish" className="w-full h-full object-cover"/>
  </div>
  <div className="aspect-[4/3] rounded-3xl bg-white/70 shadow overflow-hidden">
    <img src="image/hero4.jpg" alt="dish" className="w-full h-full object-cover"/>
  </div>
</div>
            </div>
          </section>

          {/* 套餐构建器 */}
          <section id="builder" className="max-w-6xl mx-auto px-4 py-12">
            <SectionTitle>{t.sectionTitles.builder}</SectionTitle>
            <div className="grid lg:grid-cols-3 gap-6">
              {/* 左：控制区 */}
              <div className="lg:col-span-2 p-4 md:p-6 rounded-3xl border bg-white/70 shadow-sm">
                <div className="grid md:grid-cols-3 gap-4 items-end">
                  <label className="block">
                    <span className="text-sm text-gray-600">{t.peopleInput}</span>
                    <input type="number" min={10} max={9999} value={guestCount} onChange={(e) => setGuestCount(parseInt(e.target.value||'10'))} className="mt-1 w-full rounded-xl border px-3 py-2" />
                  </label>
                  <label className="block">
                    <span className="text-sm text-gray-600">{t.chooseRange}</span>
                    <select value={rule.range} onChange={(e)=>{ const val = e.target.value; const r = RULES.find(x=>x.range===val); if (r) setGuestCount(Math.max(r.min, Math.min(r.max<10000?r.max:Math.max(guestCount,r.min), guestCount))); }} className="mt-1 w-full rounded-xl border px-3 py-2">
                      {RULES.map(r => (<option key={r.range} value={r.range}>{r.range}</option>))}
                    </select>
                  </label>
                  <label className="block">
                    <span className="text-sm text-gray-600">{t.pkg.selectPkg}</span>
                    <select value={pkgKey||''} onChange={(e)=>{ setPkgKey(e.target.value||null); setPkgSelections({ starters: [], hot: [], desserts: []}); }} className="mt-1 w-full rounded-xl border px-3 py-2">
                      <option value="">—</option>
                      <option value="standard">{t.pkg.standard} — {chf(rule.prices.standard)}</option>
                      <option value="deluxe">{t.pkg.deluxe} — {chf(rule.prices.deluxe)}</option>
                      <option value="deluxePlus">{t.pkg.deluxePlus} — {chf(rule.prices.deluxePlus)}</option>
                    </select>
                  </label>
                </div>

                {/* 选择菜品 */}
                {pkgKey && (
                  <div className="mt-6 grid md:grid-cols-3 gap-4">
                    {['starters','hot','desserts'].map((cat) => (
                      <div key={cat} className="p-4 rounded-2xl border bg-white">
                        <div className="text-sm text-gray-600 mb-1">{t.pkg.chooseItems}</div>
                        <div className="font-medium mb-2">
                          {cat === 'starters' ? t.pkg.starters : cat === 'hot' ? t.pkg.hot : t.pkg.desserts}
                          <span className="text-xs text-gray-500 ml-2">({(picksRequired[cat]||0)} {lang==='en'?'req':'必选'})</span>
                        </div>
                        <div className="grid gap-2">
                          {(cat === 'starters' ? DISHES.starters : cat === 'hot' ? DISHES.hot : DISHES.desserts).map(d => {
                            const chosen = pkgSelections[cat].includes(d.id);
                            const disabled = !chosen && (pkgSelections[cat].length >= (picksRequired[cat]||0));
                            return (
                              <button key={d.id} onClick={()=>!disabled && togglePkgItem(cat, d.id)} className={`flex items-center gap-3 text-left p-2 rounded-xl border ${chosen? 'bg-emerald-50 border-emerald-300':'bg-white hover:bg-gray-50'} ${disabled? 'opacity-50 cursor-not-allowed':''}`}>
                                <img src={d.img} alt="" className="w-12 h-12 rounded-lg object-cover"/>
                                <div className="flex-1">
                                  <div className="text-sm font-medium">{d.name[lang]}</div>
                                  <div className="text-xs text-gray-500">{chosen ? (lang==='de'?'Ausgewählt':'已选') : ''}</div>
                                </div>
                                <div className="text-xs px-2 py-1 rounded-full border">{chosen?'✓':'+'}</div>
                              </button>
                            );
                          })}
                        </div>
                      </div>
                    ))}
                  </div>
                )}

                {/* 汇总与添加 */}
                <div className="mt-6 flex flex-wrap items-center justify-between gap-3">
                  <div className="text-sm text-gray-600">
                    {t.pricePerPerson}: {pkgKey ? chf(pricePerPerson) : '—'} · {t.total}: {pkgKey ? chf(packageSubtotal) : '—'}
                  </div>
                  <div className="flex gap-2">
                    <button onClick={addPackageToOrder} disabled={!pkgKey || !isPkgValid()} className="px-4 py-2 rounded-xl bg-black text-white disabled:opacity-50">{t.addToOrder}</button>
                    <button onClick={clearAll} className="px-4 py-2 rounded-xl border bg-white">{t.clear}</button>
                  </div>
                </div>
              </div>

              {/* 右：购物车 */}
              <div className="p-4 md:p-6 rounded-3xl border bg-white/70 shadow-sm">
                <div className="font-semibold mb-3">{t.yourSelection}</div>
                {cart.length === 0 ? (
                  <div className="text-sm text-gray-500">{t.menuView.empty}</div>
                ) : (
                  <div className="space-y-3">
                    {cart.map((it) => (
                      <div key={it.id} className="flex items-center justify-between gap-3">
                        <div className="flex-1">
                          <div className="text-sm font-medium">{it.name}</div>
                          <div className="text-xs text-gray-500">{chf(it.price)} × {it.qty}</div>
                        </div>
                        <div className="flex items-center gap-2">
                          <input type="number" min={0} value={it.qty} onChange={(e)=>updateQty(it.id, parseInt(e.target.value||'0'))} className="w-16 rounded-lg border px-2 py-1"/>
                          <div className="w-20 text-right text-sm">{chf(it.price * it.qty)}</div>
                        </div>
                      </div>
                    ))}
                    <div className="flex items-center justify-between border-t pt-2 mt-2">
                      <div className="text-sm text-gray-600">{t.total}</div>
                      <div className="font-semibold">{chf(total)}</div>
                    </div>
                    <button onClick={goToCheckout} className="w-full mt-3 px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">{t.goCheckout || 'Checkout'}</button>
                    <button onClick={goToCheckout} className="w-full mt-3 px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">{t.goCheckout || 'Checkout'}</button>
                  </div>
                )}
              </div>
            </div>
          </section>

          {/* 单点区 */}
          <section id="menu" className="max-w-6xl mx-auto px-4 py-12">
            <SectionTitle>{t.sectionTitles.menu}</SectionTitle>
            <div className="grid md:grid-cols-3 gap-6">
              <div className="md:col-span-2 grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                {[...DISHES.starters, ...DISHES.hot, ...DISHES.desserts].map((d) => (
                  <DishCard key={d.id} dish={d} lang={lang} onAdd={() => addDish(d)} />
                ))}
              </div>
              <div className="p-4 md:p-6 rounded-3xl border bg-white/70 shadow-sm h-fit sticky top-24">
                <div className="font-semibold mb-3">{t.yourSelection}</div>
                {cart.length === 0 ? (
                  <div className="text-sm text-gray-500">{t.menuView.empty}</div>
                ) : (
                  <div className="space-y-3">
                    {cart.map((it) => (
                      <div key={it.id} className="flex items-center justify-between gap-3">
                        <div className="flex-1">
                          <div className="text-sm font-medium">{it.name}</div>
                          <div className="text-xs text-gray-500">{t.menuQty}: {it.qty}</div>
                        </div>
                        <div className="flex items-center gap-2">
                          <input type="number" min={0} value={it.qty} onChange={(e)=>updateQty(it.id, parseInt(e.target.value||'0'))} className="w-16 rounded-lg border px-2 py-1"/>
                          <div className="w-20 text-right text-sm">{chf(it.price * it.qty)}</div>
                        </div>
                      </div>
                    ))}
                    <div className="flex items-center justify-between border-t pt-2 mt-2">
                      <div className="text-sm text-gray-600">{t.total}</div>
                      <div className="font-semibold">{chf(total)}</div>
                    </div>
                    <button onClick={goToCheckout} className="w-full mt-3 px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">{t.goCheckout || 'Checkout'}</button>
                  </div>
                )}
              </div>
            </div>
          </section>

          {/* 菜品图库 */}
          <section className="max-w-6xl mx-auto px-4 py-12">
            <SectionTitle>{t.sectionTitles.gallery}</SectionTitle>
            <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-3">
              {[...DISHES.starters, ...DISHES.hot, ...DISHES.desserts].slice(0,8).map((d) => (
                <div key={d.id} className="rounded-2xl overflow-hidden border bg-white">
                  <img src={d.img} alt={d.name[lang]} className="w-full h-40 object-cover"/>
                  <div className="p-3 text-sm font-medium">{d.name[lang]}</div>
                </div>
              ))}
            </div>
          </section>

          {/* 关于 */}
          <section id="about" className="max-w-6xl mx-auto px-4 py-12">
            <SectionTitle>{t.sectionTitles.about}</SectionTitle>
            <div className="grid md:grid-cols-3 gap-6">
              {[t.trust.a, t.trust.b, t.trust.c].map((txt, i) => (
                <div key={i} className="p-6 rounded-3xl border bg-white/70 shadow-sm">
                  <div className="text-lg font-semibold mb-2">{txt}</div>
                  <p className="text-sm text-gray-600">WokRock steht für sauberes Arbeiten, hochwertige Zutaten und fein abgestimmte Rezepte. Unsere Küche ist auf Gruppen-Events optimiert – damit Ihr Anlass reibungslos und köstlich wird.</p>
                </div>
              ))}
            </div>
          </section>

          {/* 结账/联系 */}
          <section id="checkout" className="max-w-6xl mx-auto px-4 py-12">
            <SectionTitle>{t.sectionTitles.checkout}</SectionTitle>
            <div className="grid md:grid-cols-3 gap-6">
              <div className="md:col-span-2 p-4 md:p-6 rounded-3xl border bg-white/70 shadow-sm">
                <div className="grid sm:grid-cols-2 gap-4">
                  <label className="block">
                    <span className="text-sm text-gray-600">{t.delivery.date}</span>
                    <input ref={dateInputRef} type="date" value={deliveryDate} onChange={(e)=>setDeliveryDate(e.target.value)} className="mt-1 w-full rounded-xl border px-3 py-2"/>
                  </label>
                  <label className="block">
                    <span className="text-sm text-gray-600">{t.delivery.time}</span>
                    <input type="time" value={deliveryTime} onChange={(e)=>setDeliveryTime(e.target.value)} className="mt-1 w-full rounded-xl border px-3 py-2"/>
                  </label>
                  <label className="sm:col-span-2 block">
                    <span className="text-sm text-gray-600">{t.delivery.address}</span>
                    <input type="text" value={address} onChange={(e)=>setAddress(e.target.value)} placeholder="Strasse Nr., PLZ Ort" className="mt-1 w-full rounded-xl border px-3 py-2"/>
                  </label>
                  <label className="sm:col-span-2 block">
                    <span className="text-sm text-gray-600">{t.delivery.notes}</span>
                    <textarea value={notes} onChange={(e)=>setNotes(e.target.value)} rows={3} className="mt-1 w-full rounded-xl border px-3 py-2"></textarea>
                  </label>
                </div>
                <div className="mt-6 flex flex-wrap gap-3">
                  <a onClick={(e)=>{e.preventDefault(); handleDownloadPDF();}} href="#" className="px-4 py-2 rounded-xl bg-black text-white">{t.downloadPDF}</a>
                  <a onClick={showConfirmation} href={emailLink} className="px-4 py-2 rounded-xl border bg-white">{t.emailOrder}</a>
                  <div className="inline-flex items-center gap-2 px-4 py-2 rounded-xl border bg-white">
                    <span>{t.orCall}</span>
                    <a href="tel:+41 78 352 3555" className="font-semibold">{t.phone}</a>
                  </div>
                </div>
              </div>

              <div className="p-4 md:p-6 rounded-3xl border bg-white/70 shadow-sm">
                <div ref={receiptRef} className="text-sm">
                  <div className="font-semibold mb-2">WokRock — {orderType === 'package' ? t.orderType.package : t.orderType.ala}</div>
                  <ul className="space-y-1">
                    {selectionSummaryLines().map((line, i) => (<li key={i}>{line}</li>))}
                  </ul>
                  <div className="mt-3 border-t pt-2 flex items-center justify-between">
                    <span>{t.total}</span>
                    <span className="font-semibold">{chf(total)}</span>
                  </div>
                  <div className="mt-3 text-xs text-gray-500">
                    {t.delivery.date}: {deliveryDate || '—'} · {t.delivery.time}: {deliveryTime || '—'}<br/>
                    {t.delivery.address}: {address || '—'}
                  </div>
                </div>
              </div>
            </div>
          </section>

          {/* 页脚 */}
          <footer className="mt-12 border-t">
            <div className="max-w-6xl mx-auto px-4 py-10 grid md:grid-cols-4 gap-6 text-sm">
              <div>
                <div className="font-bold">WokRock</div>
                <div className="text-gray-600 mt-2">Premium Asian catering for events in Switzerland.</div>
              </div>
              <div>
                <div className="font-semibold mb-2">{t.nav.menu}</div>
                <ul className="space-y-1">
                  <li><a href="#builder" className="hover:opacity-70">{t.nav.packages}</a></li>
                  <li><a href="#menu" className="hover:opacity-70">{t.nav.menu}</a></li>
                </ul>
              </div>
              <div>
                <div className="font-semibold mb-2">{t.nav.contact}</div>
                <ul className="space-y-1">
                  <li><a href="mailto:bestellung@wokrock.com" className="hover:opacity-70">bestellung@wokrock.com</a></li>
                  <li><a href="tel:+41 79 352 3555" className="hover:opacity-70">{t.phone}</a></li>
                </ul>
              </div>
              <div>
                <div className="font-semibold mb-2">Social</div>
                <ul className="space-y-1 text-gray-600">
                  <li>Instagram</li>
                  <li>Facebook</li>
                </ul>
              </div>
            </div>
            <div className="text-center text-xs text-gray-500 pb-8">© {new Date().getFullYear()} WokRock</div>
          </footer>

          {/* 顶部弹出提示 */}
          {showToast && (
            <div className="fixed inset-x-0 top-4 z-[100] flex justify-center">
              <div className="px-4 py-3 rounded-xl shadow border bg-white">
                <div className="text-sm font-medium">谢谢！我们会尽快与您联系 / Danke! Wir melden uns bald / Thanks! We'll contact you soon.</div>
              </div>
            </div>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<WokRockSite />);
  </script>
</body>
</html>
